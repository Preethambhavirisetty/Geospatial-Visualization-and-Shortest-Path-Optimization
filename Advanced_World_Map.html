
    <!DOCTYPE html>
    <html>
    <head>
        <title>Advanced World Map Route Planner</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: 'Arial', sans-serif;
            }
            #map {
                position: absolute;
                top: 0;
                bottom: 0;
                right: 0;
                left: 0;
                height: 100vh !important;
                width: 100vw !important;
            }
            .control-panel {
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                background-color: rgba(255, 255, 255, 0.95);
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                max-width: 300px;
                backdrop-filter: blur(5px);
            }
            .route-stats {
                position: fixed;
                bottom: 20px;
                left: 20px;
                z-index: 1000;
                background-color: rgba(255, 255, 255, 0.95);
                padding: 15px;
                border-radius: 10px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                display: none;
                backdrop-filter: blur(5px);
            }
            select {
                width: 100%;
                padding: 8px;
                margin: 5px 0;
                border: 1px solid #ddd;
                border-radius: 5px;
                background-color: white;
            }
            button {
                width: 100%;
                background-color: #4CAF50;
                color: white;
                border: none;
                padding: 10px;
                border-radius: 5px;
                cursor: pointer;
                margin-top: 10px;
                transition: background-color 0.3s;
            }
            button:hover {
                background-color: #45a049;
            }
            .stats-container {
                margin-top: 15px;
                padding-top: 15px;
                border-top: 1px solid #ddd;
            }
            .stat-item {
                display: flex;
                justify-content: space-between;
                margin: 5px 0;
            }
            .city-marker {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 12px;
                height: 12px;
                border-radius: 50%;
                border: 2px solid white;
                transition: transform 0.3s;
            }
            .city-marker:hover {
                transform: scale(1.2);
            }
            .distance-label {
                color: white;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
                font-weight: bold;
                padding: 4px 8px;
                border-radius: 4px;
                background-color: rgba(0,0,0,0.6);
            }
            #routeChart {
                margin-top: 15px;
                width: 100%;
                height: 150px;
            }
            .toggle-theme {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1000;
                padding: 10px;
                border-radius: 5px;
                background-color: rgba(255, 255, 255, 0.95);
                cursor: pointer;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <div class="toggle-theme">
            <i class="fas fa-adjust"></i>
        </div>
        <div class="control-panel">
            <h3 style="margin-top: 0;">Route Planner</h3>
            <div>
                <select id="source">
                    <option value="">Select Source City</option>
                    <option value="New York, USA">New York, USA</option>
<option value="London, UK">London, UK</option>
<option value="Tokyo, Japan">Tokyo, Japan</option>
<option value="Paris, France">Paris, France</option>
<option value="Berlin, Germany">Berlin, Germany</option>
<option value="Sydney, Australia">Sydney, Australia</option>
<option value="Cape Town, South Africa">Cape Town, South Africa</option>
<option value="Beijing, China">Beijing, China</option>
<option value="Moscow, Russia">Moscow, Russia</option>
<option value="Dubai, UAE">Dubai, UAE</option>
<option value="São Paulo, Brazil">São Paulo, Brazil</option>
<option value="Mumbai, India">Mumbai, India</option>
<option value="Mexico City, Mexico">Mexico City, Mexico</option>
<option value="Toronto, Canada">Toronto, Canada</option>
<option value="Buenos Aires, Argentina">Buenos Aires, Argentina</option>
<option value="Cairo, Egypt">Cairo, Egypt</option>
<option value="Istanbul, Turkey">Istanbul, Turkey</option>
<option value="Seoul, South Korea">Seoul, South Korea</option>
<option value="Singapore, Singapore">Singapore, Singapore</option>
<option value="Rome, Italy">Rome, Italy</option>
<option value="Bangkok, Thailand">Bangkok, Thailand</option>
<option value="Rio de Janeiro, Brazil">Rio de Janeiro, Brazil</option>
<option value="Amsterdam, Netherlands">Amsterdam, Netherlands</option>
<option value="Madrid, Spain">Madrid, Spain</option>
<option value="Vienna, Austria">Vienna, Austria</option>
<option value="Stockholm, Sweden">Stockholm, Sweden</option>
<option value="Hong Kong, China">Hong Kong, China</option>
<option value="Auckland, New Zealand">Auckland, New Zealand</option>
<option value="Vancouver, Canada">Vancouver, Canada</option>
<option value="San Francisco, USA">San Francisco, USA</option>
                </select>
            </div>
            <div>
                <select id="destination">
                    <option value="">Select Destination City</option>
                    <option value="New York, USA">New York, USA</option>
<option value="London, UK">London, UK</option>
<option value="Tokyo, Japan">Tokyo, Japan</option>
<option value="Paris, France">Paris, France</option>
<option value="Berlin, Germany">Berlin, Germany</option>
<option value="Sydney, Australia">Sydney, Australia</option>
<option value="Cape Town, South Africa">Cape Town, South Africa</option>
<option value="Beijing, China">Beijing, China</option>
<option value="Moscow, Russia">Moscow, Russia</option>
<option value="Dubai, UAE">Dubai, UAE</option>
<option value="São Paulo, Brazil">São Paulo, Brazil</option>
<option value="Mumbai, India">Mumbai, India</option>
<option value="Mexico City, Mexico">Mexico City, Mexico</option>
<option value="Toronto, Canada">Toronto, Canada</option>
<option value="Buenos Aires, Argentina">Buenos Aires, Argentina</option>
<option value="Cairo, Egypt">Cairo, Egypt</option>
<option value="Istanbul, Turkey">Istanbul, Turkey</option>
<option value="Seoul, South Korea">Seoul, South Korea</option>
<option value="Singapore, Singapore">Singapore, Singapore</option>
<option value="Rome, Italy">Rome, Italy</option>
<option value="Bangkok, Thailand">Bangkok, Thailand</option>
<option value="Rio de Janeiro, Brazil">Rio de Janeiro, Brazil</option>
<option value="Amsterdam, Netherlands">Amsterdam, Netherlands</option>
<option value="Madrid, Spain">Madrid, Spain</option>
<option value="Vienna, Austria">Vienna, Austria</option>
<option value="Stockholm, Sweden">Stockholm, Sweden</option>
<option value="Hong Kong, China">Hong Kong, China</option>
<option value="Auckland, New Zealand">Auckland, New Zealand</option>
<option value="Vancouver, Canada">Vancouver, Canada</option>
<option value="San Francisco, USA">San Francisco, USA</option>
                </select>
            </div>
            <button onclick="calculateRoute()">
                <i class="fas fa-route"></i> Calculate Route
            </button>
            <div class="stats-container">
                <div id="routeStats"></div>
                <canvas id="routeChart"></canvas>
            </div>
        </div>
        <div class="route-stats" id="routeStatsPanel">
            <h4 style="margin-top: 0;">Route Information</h4>
            <div id="detailedStats"></div>
        </div>

        <script>
        let map = L.map('map', {
            center: [0, 0],
            zoom: 2,
            minZoom: 2,
            worldCopyJump: true
        });

        let isDarkTheme = true;
        const locations = {'New York, USA': [40.712776, -74.005974], 'London, UK': [51.507351, -0.127758], 'Tokyo, Japan': [35.689487, 139.691711], 'Paris, France': [48.856613, 2.352222], 'Berlin, Germany': [52.520008, 13.404954], 'Sydney, Australia': [-33.86882, 151.20929], 'Cape Town, South Africa': [-33.92487, 18.424055], 'Beijing, China': [39.904202, 116.407394], 'Moscow, Russia': [55.755825, 37.617298], 'Dubai, UAE': [25.276987, 55.296249], 'São Paulo, Brazil': [-23.55052, -46.633308], 'Mumbai, India': [19.07609, 72.877426], 'Mexico City, Mexico': [19.432608, -99.133209], 'Toronto, Canada': [43.65107, -79.347015], 'Buenos Aires, Argentina': [-34.603722, -58.381592], 'Cairo, Egypt': [30.04442, 31.235712], 'Istanbul, Turkey': [41.00824, 28.978359], 'Seoul, South Korea': [37.566536, 126.977966], 'Singapore, Singapore': [1.352083, 103.819839], 'Rome, Italy': [41.902782, 12.496366], 'Bangkok, Thailand': [13.756331, 100.501765], 'Rio de Janeiro, Brazil': [-22.906847, -43.172896], 'Amsterdam, Netherlands': [52.370216, 4.895168], 'Madrid, Spain': [40.416775, -3.70379], 'Vienna, Austria': [48.208174, 16.373819], 'Stockholm, Sweden': [59.329323, 18.068581], 'Hong Kong, China': [22.396428, 114.109497], 'Auckland, New Zealand': [-36.84846, 174.763332], 'Vancouver, Canada': [49.282729, -123.120738], 'San Francisco, USA': [37.774929, -122.419416]};
        const edges = [('New York, USA', 'London, UK', 5571), ('London, UK', 'Paris, France', 344), ('Paris, France', 'Berlin, Germany', 878), ('Berlin, Germany', 'Moscow, Russia', 1609), ('Moscow, Russia', 'Beijing, China', 5800), ('Beijing, China', 'Tokyo, Japan', 2098), ('Tokyo, Japan', 'Seoul, South Korea', 1158), ('Seoul, South Korea', 'Hong Kong, China', 2097), ('Hong Kong, China', 'Singapore, Singapore', 2570), ('Singapore, Singapore', 'Sydney, Australia', 6298), ('Sydney, Australia', 'Auckland, New Zealand', 2164), ('Dubai, UAE', 'Mumbai, India', 1921), ('Mumbai, India', 'Bangkok, Thailand', 3168), ('Bangkok, Thailand', 'Hong Kong, China', 1687), ('London, UK', 'Amsterdam, Netherlands', 358), ('Amsterdam, Netherlands', 'Berlin, Germany', 577), ('Paris, France', 'Madrid, Spain', 1054), ('Madrid, Spain', 'Rome, Italy', 1365), ('Rome, Italy', 'Vienna, Austria', 765), ('Vienna, Austria', 'Stockholm, Sweden', 1247), ('New York, USA', 'Toronto, Canada', 551), ('Toronto, Canada', 'Vancouver, Canada', 3363), ('Vancouver, Canada', 'San Francisco, USA', 1278), ('San Francisco, USA', 'Mexico City, Mexico', 3057), ('Mexico City, Mexico', 'São Paulo, Brazil', 7713), ('São Paulo, Brazil', 'Rio de Janeiro, Brazil', 429), ('Rio de Janeiro, Brazil', 'Buenos Aires, Argentina', 2089), ('Dubai, UAE', 'Cairo, Egypt', 2426), ('Cairo, Egypt', 'Istanbul, Turkey', 1228), ('Istanbul, Turkey', 'Vienna, Austria', 1034)];
        let currentMarkers = [];
        let currentPath = null;
        let routeChart = null;
        
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            updateMapTheme();
        }

        function updateMapTheme() {
            const currentLayer = map.getLayers().filter(layer => layer instanceof L.TileLayer)[0];
            if (currentLayer) {
                map.removeLayer(currentLayer);
            }

            const tileUrl = isDarkTheme 
                ? 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png'
                : 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png';

            L.tileLayer(tileUrl, {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                maxZoom: 19,
                noWrap: true,
                bounds: [[-90, -180], [90, 180]]
            }).addTo(map);
        }

        document.querySelector('.toggle-theme').addEventListener('click', toggleTheme);
        updateMapTheme();

        function calculateRoute() {
            clearRoute();
            const source = document.getElementById('source').value;
            const destination = document.getElementById('destination').value;

            if (!source || !destination) {
                alert('Please select both source and destination cities');
                return;
            }

            const sourceCoords = locations[source];
            const destCoords = locations[destination];

            // Add animated markers
            addAnimatedMarker(sourceCoords, 'green', source);
            addAnimatedMarker(destCoords, 'red', destination);

            // Draw animated path
            drawAnimatedPath(sourceCoords, destCoords);

            // Calculate and display route statistics
            updateRouteStats(source, destination);

            // Update route chart
            updateRouteChart(source, destination);

            // Fit map to show the route
            const bounds = L.latLngBounds([sourceCoords, destCoords]);
            map.fitBounds(bounds, {padding: [50, 50]});
        }

        function addAnimatedMarker(coords, color, city) {
            const marker = L.marker(coords, {
                icon: L.divIcon({
                    className: 'city-marker',
                    html: `<div style="background-color: ${color};" class="city-marker"></div>`,
                    iconSize: [16, 16]
                })
            }).addTo(map);

            marker.bindPopup(`
                <div style="text-align: center;">
                    <strong>${city}</strong><br>
                    Lat: ${coords[0].toFixed(4)}<br>
                    Lon: ${coords[1].toFixed(4)}
                </div>
            `);

            currentMarkers.push(marker);
        }

        function drawAnimatedPath(start, end) {
            const path = [start, end];
            currentPath = L.polyline(path, {
                color: '#4CAF50',
                weight: 3,
                opacity: 0.8,
                dashArray: '10, 10',
                lineCap: 'round'
            }).addTo(map);

            animatePath();
        }

        function animatePath() {
            let offset = 0;
            const animate = () => {
                offset = (offset + 1) % 20;
                currentPath.setStyle({ dashOffset: -offset });
                requestAnimationFrame(animate);
            };
            animate();
        }

        function updateRouteStats(source, dest) {
            const stats = calculateDistance(source, dest);
            document.getElementById('routeStats').innerHTML = `
                <div class="stat-item">
                    <span>Distance:</span>
                    <span>${stats.distance.toLocaleString()} km</span>
                </div>
                <div class="stat-item">
                    <span>Flight Time:</span>
                    <span>${stats.flightTime}</span>
                </div>
                <div class="stat-item">
                    <span>Time Difference:</span>
                    <span>${stats.timeDiff} hours</span>
                </div>
            `;
            
            document.getElementById('routeStatsPanel').style.display = 'block';
        }

        function calculateDistance(source, dest) {
            const [lat1, lon1] = locations[source];
            const [lat2, lon2] = locations[dest];
            
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            const distance = Math.round(R * c);

            // Calculate approximate flight time (assuming 800 km/h average speed)
            const hours = Math.floor(distance / 800);
            const minutes = Math.round((distance / 800 % 1) * 60);
            const flightTime = `${hours}h ${minutes}m`;

            // Calculate approximate time difference based on longitude
            const timeDiff = Math.round((lon2 - lon1) * 24 / 360);

            return { distance, flightTime, timeDiff };
        }

        function updateRouteChart(source, dest) {
            const stats = calculateDistance(source, dest);
            
            if (routeChart) {
                routeChart.destroy();
            }

            const ctx = document.getElementById('routeChart').getContext('2d');
            routeChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [source, dest],
                    datasets: [{
                        label: 'Route Elevation',
                        data: [0, stats.distance / 100],
                        borderColor: '#4CAF50',
                        tension: 0.4,
                        fill: true,
                        backgroundColor: 'rgba(76, 175, 80, 0.2)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            display: false
                        }
                    }
                }
            });
        }

        function clearRoute() {
            currentMarkers.forEach(marker => map.removeLayer(marker));
            currentMarkers = [];
            if (currentPath) {
                map.removeLayer(currentPath);
            }
            if (routeChart) {
                routeChart.destroy();
            }
            document.getElementById('routeStats').innerHTML = '';
            document.getElementById('routeStatsPanel').style.display = 'none';
        }
        </script>
    </body>
    </html>
    